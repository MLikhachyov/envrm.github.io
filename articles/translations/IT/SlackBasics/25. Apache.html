<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="ru-RU">
  <head>
    <meta charset="utf-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Personal page">
    <meta name="author" content="Likhachev Maxim">

    <link rel="shortcut icon" href="../../../../ico/favicon.ico">

    <title>#!/usr/bin/env rm -- Статьи и переводы :: Основы Slackware Linux -- 25. Apache</title>

    <link rel="stylesheet" href="../../../../css/bootstrap.min.css">
    <link rel="stylesheet" href="../../../../css/custom.css">
    <link rel="stylesheet" href="../../../../css/fontello.css">
    <link rel="stylesheet" href="../../../../css/animation.css">

    <link rel="stylesheet" href="../../../../css/shell-wrap.css">

    <script type="text/javascript" src="../../../../js/SyntaxHighlighter/shCore.js"></script>

		<link href="../../../../css/SyntaxHighlighter/shCore.css" rel="stylesheet" type="text/css" />

		<link href="../../../../css/SyntaxHighlighter/shThemeEclipse.css" rel="stylesheet" type="text/css" />
		<!-- <link href="../../../../css/SyntaxHighlighter/shThemeDjango.css" rel="stylesheet" type="text/css" /> -->
		<!-- <link href="../../../../css/SyntaxHighlighter/shThemeEmacs.css" rel="stylesheet" type="text/css" /> -->
		<!-- <link href="../../../../css/SyntaxHighlighter/shThemeFadeToGrey.css" rel="stylesheet" type="text/css" /> -->
		<!-- <link href="../../../../css/SyntaxHighlighter/shThemeMDUltra.css" rel="stylesheet" type="text/css" /> -->
		<!-- <link href="../../../../css/SyntaxHighlighter/shThemeMidnight.css" rel="stylesheet" type="text/css" /> -->
		<!-- <link href="../../../../css/SyntaxHighlighter/shThemeRDark.css" rel="stylesheet" type="text/css" /> -->

		<script type="text/javascript" src="../../../../js/SyntaxHighlighter/shBrushScheme.js"></script>
		<script type="text/javascript" src="../../../../js/SyntaxHighlighter/shBrushTcl_simple.js"></script>
		<script type="text/javascript" src="../../../../js/SyntaxHighlighter/shBrushBash.js"></script>
		<script type="text/javascript" src="../../../../js/SyntaxHighlighter/shBrushErlang.js"></script>
		<script type="text/javascript" src="../../../../js/SyntaxHighlighter/shBrushPlain.js"></script>
		<script type="text/javascript" src="../../../../js/SyntaxHighlighter/shBrushBash.js"></script>
		<script type="text/javascript" src="../../../../js/SyntaxHighlighter/shBrushLatex.js"></script>
		<script type="text/javascript" src="../../../../js/SyntaxHighlighter/shBrushHaskell.js"></script>
		<script type="text/javascript" src="../../../../js/SyntaxHighlighter/shBrushProlog.js"></script>
		<script type="text/javascript" src="../../../../js/SyntaxHighlighter/shBrushDiff.js"></script>
		<script type="text/javascript" src="../../../../js/SyntaxHighlighter/shBrushVim.js"></script>
		<script type="text/javascript" src="../../../../js/SyntaxHighlighter/shBrushJScript.js"></script>
		<script type="text/javascript" src="../../../../js/SyntaxHighlighter/shBrushBat.js"></script>
		<script type="text/javascript" src="../../../../js/SyntaxHighlighter/shBrushXml.js"></script>
		<script type="text/javascript" src="../../../../js/SyntaxHighlighter/shBrushCss.js"></script>

<script type="text/javascript">
			SyntaxHighlighter.defaults['toolbar'] = false;
			SyntaxHighlighter.all()
		</script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="container">
      <div class="header">
        <ul class="nav navbar-nav pull-right">
          <li class="menu-icon"><a href="../../../../index.html"><span class="icon-home"></span></a></li>
          <li class="menu-icon"><a href="../../../../programming.html"><span class="icon-tools"></span></a></li>
          <li class="menu-icon"><a href="../../../../poetry.html"><span class="icon-feather"></span></a></li>
          <li class="menu-icon"><a href="../../../../music.html"><span class="icon-note-beamed"></span></a></li>
          <li class="menu-icon active"><a href="../../../../articles.html"><span class="icon-book"></span></a></li>
          <li class="menu-icon"><a href="../../../../about.html"><span class="icon-user"></span></a></li>
        </ul>
        <h3 class="text-muted">#!/usr/bin/env rm</h3>
      </div>

      <ol class="plain breadcrumb">
        <li><a href="../../../../articles.html"><span class="icon-book"></span></a></li>
        <li><a href="index.html">Основы Slackware Linux</a></li>
        <li><a href="index.html#VI">VI. Сетевое администрирование</a></li>
        <li class="active">25. Apache</li>
      </ol>

      <div class="row columns">

        <h3 class="text-center">25. Apache</h3>

</br>

        <div class="col-lg-1">
        </div>

<div class="article col-lg-10 text-justify">

<h4 id="1">25.1. Введение</h4>

<p>Apache &#8211; это наиболее популярный web-сервер, начиная с апреля 1996 г. Он был
основан на NCSA httpd и превратился в полноценный HTTP-сервер. Сейчас Slackware
Linux использует ветку Apache 1.3.x, на которой и основана эта глава.</p>

<br />

<h4 id="2">25.2. Установка</h4>

<p>Apache может быть установлен путём добавления пакета из набора
&laquo;n&raquo;. Если вы также желаете использовать PHP, тогда потребуются
пакеты php (набор &laquo;n&raquo;) и mysql (набор &laquo;ap&raquo;). MySQL
необходим, т.к.  скомпилированная версия PHP зависит от его разделяемых
библиотек. Можно не запускать MySQL отдельно. После установки Apache можно
включить автоматический запуск во время загрузки операционной системы, присвоив
файлу <code>/etc/rc.d/rc.httpd</code> флаг исполнимости:</p>

<div class="shell-wrap">
  <p class="shell-top-bar">user@darkstar:~</p>
  <ul class="shell-body">
<li># chmod a+x /etc/rc.d/rc.httpd</li>
</ul>
</div>

<p>Конфигурация Apache производится в файле
<code>/etc/apache/httpd.conf</code>. Можно запустить, остановить и
перезапустить Apache в любой момент с помощью команды
<strong>apachectl</strong> и параметров <var>start</var>, <var>stop</var> и
<var>restart</var>. Например, чтобы перезапустить Apache, выполните следующую
команду:</p>

<div class="shell-wrap">
  <p class="shell-top-bar">user@darkstar:~</p>
  <ul class="shell-body">
<li># apachectl restart</li>
<li>/usr/sbin/apachectl restart: httpd restarted</li>
</ul>
</div>

<br />

<h4 id="3">25.3. Пользовательские директории</h4>

<p>Apache предоставляет поддержку так называемых пользовательских директорий. Это
означает, что каждый пользователь получает веб-пространство в форме
<var>http://host/~user/</var>. Содержимое &laquo;~user/&raquo; сохраняется в
поддиректории в домашнем каталоге пользователя. Эта директория может быть
указана в параметре <var>UserDir</var> в файле <code>httpd.conf</code>.
Например:</p>

<pre class="brush: plain">
UserDir public_html
</pre>

<p>Это укажет, чтобы для хранения web-страниц использовалась директория
<code>public_html</code>. Например, страницы, доступные по адресу
<var>http://host/~snail/</var>, хранятся в директории
<code>/home/snail/public_html</code>.</p>

<br />

<h4 id="4">25.4. Виртуальные хосты</h4>

<p>Стандартный путь <var>documentroot</var> Apache в Slackware linux &#8211;
<code>/var/www/htdocs</code>. Без использования виртуальных хостов каждый
клиент, который соединится с сервером Apache, получит web-сайт из этой
директории. Так, если у вас есть два доменных имени, указывающих на сервер,
&laquo;<var>www.example.org</var>&raquo; и
&laquo;<var>forum.example.org</var>&raquo;, оба будут вести на один и тот же
сайт. Вы можете различать отдельные сайты по доменным именам с помощью
виртуальных хостов.</p>

<p>В этом примере мы рассмотрим, как можно создать два виртуальных хоста, один для
&laquo;<var>www.example.org</var>&raquo; с файлами в
<code>/var/www/htdocs-www</code> и второй для
&laquo;<var>forum.example.org</var>&raquo; в директории
<code>/var/www/htdocs-forum</code>. Для начала нам нужно указать, какой
IP-адрес должен слушать Apache. Вы должны найти где-нибудь в файле
<code>/etc/apache/httpd.conf</code> следующую строку:</p>

<pre class="brush: bash">
#NameVirtualHost *:80
</pre>

<p>Эта строка закомментирована, чтобы использовать только виртуальные хосты,
основанные на именах. Удалите символ комментария (#) и измените параметр на
&laquo;<var>BindAddress IP:port</var>&raquo; или &laquo;<var>BindAddress
*:port</var>&raquo;, если вы хотите настроить Apache на все имеющиеся
IP-адреса. Допустим, вы хотите предоставить виртуальный хост для IP-адреса
192.168.1.201 и порта 80 (порт Apache по умолчанию), тогда вы
должны изменить строку следующим образом:</p>

<pre class="brush: plain">
NameVirtualHost 192.168.1.201:80
</pre>

<p>Где-нибудь ниже строки <var>NameVirtualHost</var> вы можете найти
закомментированный пример настройки виртуального хоста:</p>

<pre class="brush: bash">
#&lt;VirtualHost *:80&gt;
#    ServerAdmin webmaster@dummy-host.example.com
#    DocumentRoot /www/docs/dummy-host.example.com
#    ServerName dummy-host.example.com
#    ErrorLog logs/dummy-host.example.com-error_log
#    CustomLog logs/dummy-host.example.com-access_log common
#&lt;/VirtualHost&gt;
</pre>
  
<p>Вы можете использовать этот пример в качестве шаблона. Например, если вы хотите
использовать все значения по умолчанию и хотите сохранять логи обоих виртуальных
хостов в журнал Apache по умолчанию, вы должны добавить следующие строки:</p>

<pre class="brush: xml">
&lt;VirtualHost 192.168.1.201:80&gt;
	DocumentRoot /var/www/htdocs-www
	ServerName www.example.org
&lt;/VirtualHost&gt;

&lt;VirtualHost 192.168.1.201:80&gt;
	DocumentRoot /var/www/htdocs-forum
	ServerName forum.example.org
&lt;/VirtualHost&gt;
</pre>

<br />
<ul class="pager">
  <li class="previous"><a href="24. Интернет-суперсервер.html">&larr; 24. Интернет-суперсервер</a></li>
  <li class="next"><a href="26. BIND.html">26. BIND &rarr;</a></li>
</ul>

        </div>

        <div class="col-lg-1">
        </div>

      </div>

      <div class="footer">
        <p align="center"></p>
      </div>

    </div>

    <script src="../../../../js/jquery-2.1.0.min.js"></script>
    <script src="../../../../js/bootstrap.min.js"></script>

  </body>
</html>

